console.log("ACOConfig.js");

const acoCmapPrototype = [ // 257 entries
    [0.6470588235294118, 0.0, 0.14901960784313725,],
    [0.654718137254902, 0.007352941176470588, 0.14917279411764706,],
    [0.6623774509803921, 0.014705882352941176, 0.14932598039215686,],
    [0.6700367647058824, 0.022058823529411763, 0.14947916666666666,],
    [0.6776960784313726, 0.029411764705882353, 0.14963235294117647,],
    [0.6853553921568628, 0.03676470588235294, 0.14978553921568627,],
    [0.6930147058823529, 0.044117647058823525, 0.14993872549019607,],
    [0.7006740196078431, 0.051470588235294115, 0.15009191176470588,],
    [0.7083333333333334, 0.058823529411764705, 0.15024509803921568,],
    [0.7159926470588236, 0.0661764705882353, 0.15039828431372548,],
    [0.7236519607843137, 0.07352941176470588, 0.1505514705882353,],
    [0.7313112745098039, 0.08088235294117647, 0.1507046568627451,],
    [0.7389705882352942, 0.08823529411764705, 0.1508578431372549,],
    [0.7466299019607843, 0.09558823529411764, 0.1510110294117647,],
    [0.7542892156862745, 0.10294117647058823, 0.15116421568627453,],
    [0.7619485294117647, 0.11029411764705882, 0.15131740196078433,],
    [0.7696078431372549, 0.11764705882352941, 0.15147058823529413,],
    [0.7772671568627452, 0.125, 0.15162377450980394,],
    [0.7849264705882353, 0.1323529411764706, 0.15177696078431374,],
    [0.7925857843137255, 0.13970588235294118, 0.15193014705882354,],
    [0.8002450980392157, 0.14705882352941177, 0.15208333333333335,],
    [0.8079044117647058, 0.15441176470588236, 0.15223651960784315,],
    [0.8155637254901961, 0.16176470588235295, 0.15238970588235295,],
    [0.8232230392156863, 0.16911764705882354, 0.15254289215686276,],
    [0.8308823529411764, 0.1764705882352941, 0.15269607843137256,],
    [0.8385416666666666, 0.1838235294117647, 0.15284926470588237,],
    [0.8449142156862746, 0.19197303921568626, 0.15465686274509804,],
    [0.8493566176470588, 0.2013174019607843, 0.15894607843137257,],
    [0.8537990196078431, 0.21066176470588233, 0.16323529411764706,],
    [0.8582414215686275, 0.22000612745098036, 0.16752450980392158,],
    [0.8626838235294118, 0.22935049019607842, 0.17181372549019608,],
    [0.8671262254901961, 0.23869485294117646, 0.1761029411764706,],
    [0.8715686274509804, 0.2480392156862745, 0.1803921568627451,],
    [0.8760110294117647, 0.2573835784313725, 0.18468137254901962,],
    [0.8804534313725491, 0.2667279411764706, 0.1889705882352941,],
    [0.8848958333333333, 0.2760723039215686, 0.19325980392156863,],
    [0.8893382352941177, 0.28541666666666665, 0.19754901960784316,],
    [0.893780637254902, 0.2947610294117647, 0.20183823529411765,],
    [0.8982230392156862, 0.3041053921568627, 0.20612745098039215,],
    [0.9026654411764706, 0.31344975490196075, 0.21041666666666667,],
    [0.9071078431372549, 0.3227941176470588, 0.2147058823529412,],
    [0.9115502450980393, 0.3321384803921568, 0.21899509803921569,],
    [0.9159926470588236, 0.34148284313725485, 0.22328431372549018,],
    [0.9204350490196078, 0.3508272058823529, 0.2275735294117647,],
    [0.9248774509803922, 0.3601715686274509, 0.23186274509803922,],
    [0.9293198529411765, 0.369515931372549, 0.23615196078431372,],
    [0.9337622549019609, 0.378860294117647, 0.2404411764705882,],
    [0.9382046568627451, 0.3882046568627451, 0.24473039215686276,],
    [0.9426470588235294, 0.39754901960784306, 0.24901960784313726,],
    [0.9470894607843138, 0.40689338235294115, 0.25330882352941175,],
    [0.951531862745098, 0.4162377450980392, 0.25759803921568625,],
    [0.9559742647058824, 0.4255821078431372, 0.2618872549019608,],
    [0.9579656862745098, 0.4354166666666666, 0.266421568627451,],
    [0.959344362745098, 0.44537377450980387, 0.2710171568627451,],
    [0.9607230392156864, 0.4553308823529411, 0.2756127450980392,],
    [0.9621017156862746, 0.46528799019607836, 0.28020833333333334,],
    [0.9634803921568628, 0.4752450980392156, 0.28480392156862744,],
    [0.964859068627451, 0.48520220588235285, 0.28939950980392154,],
    [0.9662377450980393, 0.49515931372549016, 0.29399509803921564,],
    [0.9676164215686275, 0.5051164215686273, 0.2985906862745098,],
    [0.9689950980392157, 0.5150735294117647, 0.3031862745098039,],
    [0.970373774509804, 0.5250306372549018, 0.307781862745098,],
    [0.9717524509803922, 0.5349877450980391, 0.3123774509803921,],
    [0.9731311274509804, 0.5449448529411764, 0.31697303921568626,],
    [0.9745098039215686, 0.5549019607843136, 0.32156862745098036,],
    [0.9758884803921569, 0.5648590686274508, 0.32616421568627446,],
    [0.9772671568627451, 0.5748161764705881, 0.33075980392156856,],
    [0.9786458333333333, 0.5847732843137254, 0.3353553921568627,],
    [0.9800245098039216, 0.5947303921568626, 0.3399509803921568,],
    [0.9814031862745098, 0.6046874999999999, 0.3445465686274509,],
    [0.982781862745098, 0.6146446078431371, 0.3491421568627451,],
    [0.9841605392156862, 0.6246017156862744, 0.3537377450980392,],
    [0.9855392156862746, 0.6345588235294117, 0.3583333333333333,],
    [0.9869178921568628, 0.6445159313725489, 0.3629289215686274,],
    [0.988296568627451, 0.6544730392156861, 0.3675245098039215,],
    [0.9896752450980393, 0.6644301470588234, 0.37212009803921564,],
    [0.9910539215686275, 0.6743872549019607, 0.37671568627450974,],
    [0.9921875, 0.6838848039215686, 0.38167892156862737,],
    [0.9923406862745098, 0.6915441176470588, 0.3881127450980391,],
    [0.9924938725490197, 0.6992034313725489, 0.3945465686274509,],
    [0.9926470588235294, 0.7068627450980391, 0.40098039215686265,],
    [0.9928002450980392, 0.7145220588235294, 0.4074142156862744,],
    [0.992953431372549, 0.7221813725490196, 0.4138480392156862,],
    [0.9931066176470589, 0.7298406862745097, 0.42028186274509793,],
    [0.9932598039215687, 0.7374999999999999, 0.42671568627450973,],
    [0.9934129901960784, 0.7451593137254902, 0.4331495098039215,],
    [0.9935661764705882, 0.7528186274509803, 0.4395833333333332,],
    [0.9937193627450981, 0.7604779411764705, 0.446017156862745,],
    [0.9938725490196079, 0.7681372549019607, 0.4524509803921568,],
    [0.9940257352941176, 0.7757965686274509, 0.45888480392156855,],
    [0.9941789215686274, 0.7834558823529412, 0.4653186274509803,],
    [0.9943321078431373, 0.7911151960784313, 0.4717524509803921,],
    [0.9944852941176471, 0.7987745098039215, 0.47818627450980383,],
    [0.9946384803921569, 0.8064338235294117, 0.4846200980392156,],
    [0.9947916666666666, 0.8140931372549018, 0.49105392156862737,],
    [0.9949448529411765, 0.8217524509803921, 0.4974877450980391,],
    [0.9950980392156863, 0.8294117647058823, 0.5039215686274509,],
    [0.9952512254901961, 0.8370710784313725, 0.5103553921568627,],
    [0.9954044117647058, 0.8447303921568627, 0.5167892156862745,],
    [0.9955575980392157, 0.8523897058823529, 0.5232230392156862,],
    [0.9957107843137255, 0.8600490196078431, 0.5296568627450979,],
    [0.9958639705882353, 0.8677083333333333, 0.5360906862745097,],
    [0.9960171568627451, 0.8753676470588234, 0.5425245098039215,],
    [0.9961703431372549, 0.8812806372549019, 0.5498774509803921,],
    [0.9963235294117647, 0.8860294117647058, 0.5578431372549019,],
    [0.9964767156862745, 0.8907781862745098, 0.5658088235294116,],
    [0.9966299019607843, 0.8955269607843137, 0.5737745098039215,],
    [0.9967830882352942, 0.9002757352941176, 0.5817401960784313,],
    [0.9969362745098039, 0.9050245098039216, 0.5897058823529411,],
    [0.9970894607843137, 0.9097732843137255, 0.597671568627451,],
    [0.9972426470588235, 0.9145220588235294, 0.6056372549019607,],
    [0.9973958333333334, 0.9192708333333333, 0.6136029411764705,],
    [0.9975490196078431, 0.9240196078431372, 0.6215686274509803,],
    [0.9977022058823529, 0.9287683823529411, 0.6295343137254902,],
    [0.9978553921568627, 0.9335171568627451, 0.6375,],
    [0.9980085784313726, 0.938265931372549, 0.6454656862745097,],
    [0.9981617647058824, 0.9430147058823529, 0.6534313725490195,],
    [0.9983149509803921, 0.9477634803921569, 0.6613970588235294,],
    [0.9984681372549019, 0.9525122549019608, 0.6693627450980392,],
    [0.9986213235294118, 0.9572610294117647, 0.677328431372549,],
    [0.9987745098039216, 0.9620098039215687, 0.6852941176470588,],
    [0.9989276960784313, 0.9667585784313726, 0.6932598039215686,],
    [0.9990808823529411, 0.9715073529411764, 0.7012254901960784,],
    [0.999234068627451, 0.9762561274509804, 0.7091911764705883,],
    [0.9993872549019608, 0.9810049019607843, 0.717156862745098,],
    [0.9995404411764706, 0.9857536764705882, 0.7251225490196078,],
    [0.9996936274509804, 0.9905024509803921, 0.7330882352941177,],
    [0.9998468137254902, 0.9952512254901961, 0.7410539215686275,],
    [1.0, 1.0, 0.7490196078431373,],
    [0.9941789215686274, 0.9975490196078431, 0.7410539215686275,],
    [0.9883578431372549, 0.9950980392156863, 0.7330882352941177,],
    [0.9825367647058824, 0.9926470588235294, 0.7251225490196078,],
    [0.9767156862745098, 0.9901960784313726, 0.717156862745098,],
    [0.9708946078431373, 0.9877450980392157, 0.7091911764705883,],
    [0.9650735294117647, 0.9852941176470589, 0.7012254901960785,],
    [0.9592524509803921, 0.982843137254902, 0.6932598039215687,],
    [0.9534313725490197, 0.9803921568627452, 0.6852941176470588,],
    [0.9476102941176471, 0.9779411764705883, 0.6773284313725491,],
    [0.9417892156862746, 0.9754901960784313, 0.6693627450980393,],
    [0.935968137254902, 0.9730392156862745, 0.6613970588235295,],
    [0.9301470588235294, 0.9705882352941176, 0.6534313725490196,],
    [0.9243259803921569, 0.9681372549019608, 0.6454656862745098,],
    [0.9185049019607844, 0.9656862745098039, 0.6375000000000001,],
    [0.9126838235294118, 0.9632352941176471, 0.6295343137254903,],
    [0.9068627450980393, 0.9607843137254902, 0.6215686274509805,],
    [0.9010416666666667, 0.9583333333333334, 0.6136029411764706,],
    [0.8952205882352942, 0.9558823529411765, 0.6056372549019609,],
    [0.8893995098039217, 0.9534313725490197, 0.5976715686274511,],
    [0.8835784313725491, 0.9509803921568628, 0.5897058823529413,],
    [0.8777573529411766, 0.948529411764706, 0.5817401960784315,],
    [0.871936274509804, 0.9460784313725491, 0.5737745098039218,],
    [0.8661151960784315, 0.9436274509803922, 0.5658088235294119,],
    [0.8602941176470589, 0.9411764705882354, 0.5578431372549021,],
    [0.8544730392156864, 0.9387254901960785, 0.5498774509803923,],
    [0.8478553921568629, 0.9359068627450982, 0.5430759803921569,],
    [0.8400428921568629, 0.9325367647058824, 0.5380208333333334,],
    [0.8322303921568629, 0.9291666666666667, 0.5329656862745099,],
    [0.8244178921568629, 0.9257965686274511, 0.5279105392156863,],
    [0.8166053921568629, 0.9224264705882353, 0.5228553921568628,],
    [0.8087928921568629, 0.9190563725490197, 0.5178002450980392,],
    [0.8009803921568629, 0.915686274509804, 0.5127450980392158,],
    [0.7931678921568629, 0.9123161764705883, 0.5076899509803923,],
    [0.7853553921568629, 0.9089460784313727, 0.5026348039215687,],
    [0.7775428921568629, 0.9055759803921569, 0.4975796568627452,],
    [0.7697303921568629, 0.9022058823529412, 0.49252450980392165,],
    [0.7619178921568629, 0.8988357843137256, 0.4874693627450981,],
    [0.7541053921568629, 0.8954656862745098, 0.48241421568627463,],
    [0.7462928921568629, 0.8920955882352942, 0.4773590686274511,],
    [0.7384803921568629, 0.8887254901960785, 0.47230392156862755,],
    [0.7306678921568629, 0.8853553921568628, 0.467248774509804,],
    [0.7228553921568629, 0.8819852941176471, 0.46219362745098047,],
    [0.7150428921568629, 0.8786151960784314, 0.457138480392157,],
    [0.7072303921568629, 0.8752450980392157, 0.45208333333333345,],
    [0.6994178921568629, 0.8718750000000001, 0.4470281862745099,],
    [0.6916053921568629, 0.8685049019607843, 0.44197303921568637,],
    [0.6837928921568629, 0.8651348039215687, 0.43691789215686283,],
    [0.6759803921568629, 0.861764705882353, 0.43186274509803935,],
    [0.6681678921568629, 0.8583946078431373, 0.4268075980392158,],
    [0.6603553921568629, 0.8550245098039216, 0.42175245098039227,],
    [0.6525428921568629, 0.8516544117647059, 0.41669730392156873,],
    [0.6431372549019609, 0.8475490196078432, 0.41482843137254904,],
    [0.6333333333333335, 0.8432598039215686, 0.41375612745098045,],
    [0.6235294117647061, 0.8389705882352941, 0.4126838235294118,],
    [0.6137254901960786, 0.8346813725490196, 0.4116115196078432,],
    [0.6039215686274512, 0.8303921568627451, 0.41053921568627455,],
    [0.5941176470588238, 0.8261029411764707, 0.4094669117647059,],
    [0.5843137254901962, 0.8218137254901962, 0.4083946078431373,],
    [0.5745098039215688, 0.8175245098039217, 0.40732230392156865,],
    [0.5647058823529414, 0.8132352941176472, 0.40625000000000006,],
    [0.5549019607843139, 0.8089460784313726, 0.4051776960784314,],
    [0.5450980392156864, 0.8046568627450981, 0.40410539215686275,],
    [0.535294117647059, 0.8003676470588236, 0.40303308823529416,],
    [0.5254901960784315, 0.7960784313725491, 0.4019607843137255,],
    [0.5156862745098041, 0.7917892156862746, 0.4008884803921569,],
    [0.5058823529411767, 0.7875000000000001, 0.39981617647058826,],
    [0.49607843137254914, 0.7832107843137256, 0.39874387254901966,],
    [0.48627450980392173, 0.7789215686274511, 0.397671568627451,],
    [0.4764705882352943, 0.7746323529411765, 0.39659926470588236,],
    [0.46666666666666684, 0.770343137254902, 0.39552696078431376,],
    [0.45686274509803937, 0.7660539215686275, 0.3944546568627451,],
    [0.4470588235294119, 0.761764705882353, 0.3933823529411765,],
    [0.4372549019607844, 0.7574754901960785, 0.39231004901960786,],
    [0.427450980392157, 0.753186274509804, 0.3912377450980392,],
    [0.41764705882352954, 0.7488970588235295, 0.3901654411764706,],
    [0.40784313725490207, 0.7446078431372549, 0.38909313725490197,],
    [0.3976715686274511, 0.7400428921568628, 0.38765318627450984,],
    [0.386029411764706, 0.7343750000000001, 0.38474264705882355,],
    [0.37438725490196095, 0.7287071078431373, 0.3818321078431373,],
    [0.36274509803921584, 0.7230392156862746, 0.378921568627451,],
    [0.35110294117647073, 0.7173713235294118, 0.37601102941176473,],
    [0.3394607843137256, 0.7117034313725491, 0.3731004901960785,],
    [0.3278186274509805, 0.7060355392156864, 0.3701899509803922,],
    [0.3161764705882354, 0.7003676470588236, 0.3672794117647059,],
    [0.30453431372549034, 0.6946997549019609, 0.3643688725490196,],
    [0.2928921568627452, 0.6890318627450981, 0.3614583333333334,],
    [0.2812500000000001, 0.6833639705882354, 0.3585477941176471,],
    [0.269607843137255, 0.6776960784313726, 0.3556372549019608,],
    [0.2579656862745099, 0.6720281862745099, 0.35272671568627456,],
    [0.2463235294117648, 0.6663602941176471, 0.34981617647058827,],
    [0.2346813725490197, 0.6606924019607844, 0.346905637254902,],
    [0.2230392156862746, 0.6550245098039216, 0.3439950980392157,],
    [0.2113970588235295, 0.6493566176470589, 0.34108455882352945,],
    [0.1997549019607844, 0.6436887254901962, 0.33817401960784316,],
    [0.1881127450980393, 0.6380208333333334, 0.33526348039215687,],
    [0.1764705882352942, 0.6323529411764707, 0.33235294117647063,],
    [0.16482843137254907, 0.6266850490196079, 0.32944240196078434,],
    [0.15318627450980396, 0.6210171568627452, 0.32653186274509804,],
    [0.14154411764705888, 0.6153492647058824, 0.32362132352941175,],
    [0.12990196078431376, 0.6096813725490197, 0.3207107843137255,],
    [0.11825980392156865, 0.6040134803921569, 0.3178002450980392,],
    [0.1066176470588236, 0.5983455882352942, 0.314889705882353,],
    [0.09957107843137257, 0.5916666666666667, 0.3114276960784314,],
    [0.09558823529411767, 0.5843137254901961, 0.3075980392156863,],
    [0.09160539215686277, 0.5769607843137255, 0.3037683823529412,],
    [0.08762254901960786, 0.5696078431372549, 0.29993872549019607,],
    [0.08363970588235296, 0.5622549019607843, 0.296109068627451,],
    [0.07965686274509806, 0.5549019607843138, 0.2922794117647059,],
    [0.07567401960784315, 0.5475490196078432, 0.2884497549019608,],
    [0.07169117647058826, 0.5401960784313726, 0.28462009803921573,],
    [0.06770833333333334, 0.532843137254902, 0.2807904411764706,],
    [0.06372549019607845, 0.5254901960784314, 0.2769607843137255,],
    [0.05974264705882354, 0.5181372549019608, 0.2731311274509804,],
    [0.05575980392156864, 0.5107843137254902, 0.2693014705882353,],
    [0.051776960784313736, 0.5034313725490196, 0.2654718137254902,],
    [0.047794117647058834, 0.49607843137254903, 0.2616421568627451,],
    [0.04381127450980393, 0.48872549019607847, 0.2578125,],
    [0.03982843137254903, 0.48137254901960785, 0.25398284313725494,],
    [0.03584558823529413, 0.47401960784313724, 0.25015318627450983,],
    [0.03186274509803923, 0.4666666666666667, 0.24632352941176472,],
    [0.027879901960784326, 0.4593137254901961, 0.2424938725490196,],
    [0.02389705882352941, 0.4519607843137255, 0.23866421568627452,],
    [0.01991421568627451, 0.4446078431372549, 0.23483455882352944,],
    [0.015931372549019607, 0.4372549019607843, 0.23100490196078433,],
    [0.011948529411764705, 0.42990196078431375, 0.2271752450980392,],
    [0.007965686274509803, 0.42254901960784313, 0.22334558823529413,],
    [0.003982843137254902, 0.4151960784313725, 0.21951593137254904,],
    [0.0, 0.40784313725490196, 0.21568627450980393]
];

function acoCmapInterpolate(cmap, value) {
    if (value < 0) {
        return [0, 0, 0];
    }
    else if (value > 1) {
        return [1, 1, 1];
    }
    else {
        let cmapFract = value * (cmap.length / 3 - 1);
        let cmapIndex = Math.floor(cmapFract);
        cmapFract -= cmapIndex;
        if (cmapIndex >= cmap.Length / 3 - 1) {
            return [cmap[3 * cmapIndex + 0], cmap[3 * cmapIndex + 1], cmap[3 * cmapIndex + 2]];
        }
        else {
            // Linear interpolation of colormap
            return [cmap[3 * cmapIndex + 0] + cmapFract * (cmap[3 * (cmapIndex + 1) + 0] - cmap[3 * cmapIndex + 0]), cmap[3 * cmapIndex + 1] + cmapFract * (cmap[3 * (cmapIndex + 1) + 1] - cmap[3 * cmapIndex + 1]), cmap[3 * cmapIndex + 2] + cmapFract * (cmap[3 * (cmapIndex + 1) + 2] - cmap[3 * cmapIndex + 2])];
        }
    }
}

function acoGetCmap(minVal, maxVal) {
    return acoCmapPrototype.map((triplet, index) => [minVal + (maxVal - minVal) * index / (acoCmapPrototype.length - 1), `rgb(${255 * triplet[0]}, ${255 * triplet[1]}, ${255 * triplet[2]})`]);
}

var childOConfig = {
    mapExtraParams: {
        projection: {
            name: 'globe',
            center: [90, 0],
            parallels: [30, 30]
        },
        language: "en"
    },
    storageUrl: 'https://fmi-arctic-carbon-observatory-data.lake.fmi.fi',
    sitesGeojsonFilename: 'sites.geojson',
    blocksGeojsonFilename: 'blocks.geojson',
    siteSelectorMapView: {
        center: [0, 90],
        zoom: 1.5
    },
    siteMapView: {
        center: [0, 90],
        zoom: 1.5,
        minZoom: 1,
        maxZoom: 17
    },
    chartsJson: {
        "charts": [
            {
                "id": "global",
                "title": "Every chart",
                "hidden": true,
                "sourceTypes": [
                    {
                        "id": "mgmt_event",
                        "events": true
                    }
                ]
            },
            {
                "id": "satelliteImages",
                "title": "Satellite images",
                "sourceCategoryList": [
                    {
                        "id": "tropomi_ch4_image",
                        "title": "tropomi daily methane",
                        "description": "Tropomi data.",
                    }
                ],
                "sourceTypes": [
                    {
                        "id": "tropomi_ch4",
                        "sourceCategoryId": "tropomi_ch4_image",
                        "satelliteImages": true
                    }
                ],
            }
        ]
    },
    cmap: {
        'tropomi_ch4': acoGetCmap(1802, 1976)
    }
}
